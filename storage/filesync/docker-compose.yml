
name: filesync

services:
  filesync-server:
    container_name: filesync
    image: filesync-image
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}
      - HTTP_PROXY=${PROXY_HOST}
      - HTTPS_PROXY=${PROXY_HOST}
    volumes:
      - ${FILESYNC_PATH}/config:/config
      - ${FILESYNC_PATH}/data:/data
      - ${FILESYNC_PATH}/usr:/mnt/usr
      - ${DOWNLOADS_PATH}:/mnt/usr/downloads
      - nas-files:/mnt/usr/files
      - nas-media:/mnt/usr/media
      - nas-project:/mnt/usr/project
    env_file:
      - .env
    ports:
      #- '8015:5244'
      #- '8016:8384'
      #- '8080:8080'
      - '22000:22000/tcp'   # 文件传输端口映射（TCP）
      - '22000:22000/udp'   # 文件传输端口映射（UDP）
      - '21027:21027/udp'   # 设备发现端口映射（UDP）
    hostname: filesync
    networks:
      - local_network
    restart: unless-stopped

networks:
  local_network:
    external: true

volumes:
  nas-files:
    external: true
  nas-media:
    external: true
  nas-project:
    external: true